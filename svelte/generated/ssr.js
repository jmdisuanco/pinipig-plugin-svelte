'use strict';

function noop() { }
function run(fn) {
    return fn();
}
function blank_object() {
    return Object.create(null);
}
function run_all(fns) {
    fns.forEach(run);
}
function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}
function validate_store(store, name) {
    if (!store || typeof store.subscribe !== 'function') {
        throw new Error(`'${name}' is not a store with a 'subscribe' method`);
    }
}
function subscribe(store, callback) {
    const unsub = store.subscribe(callback);
    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
}
function get_store_value(store) {
    let value;
    subscribe(store, _ => value = _)();
    return value;
}

let current_component;
function set_current_component(component) {
    current_component = component;
}
function get_current_component() {
    if (!current_component)
        throw new Error(`Function called outside component initialization`);
    return current_component;
}
function onMount(fn) {
    get_current_component().$$.on_mount.push(fn);
}
const escaped = {
    '"': '&quot;',
    "'": '&#39;',
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;'
};
function escape(html) {
    return String(html).replace(/["'&<>]/g, match => escaped[match]);
}
const missing_component = {
    $$render: () => ''
};
function validate_component(component, name) {
    if (!component || !component.$$render) {
        if (name === 'svelte:component')
            name += ' this={...}';
        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);
    }
    return component;
}
let on_destroy;
function create_ssr_component(fn) {
    function $$render(result, props, bindings, slots) {
        const parent_component = current_component;
        const $$ = {
            on_destroy,
            context: new Map(parent_component ? parent_component.$$.context : []),
            // these will be immediately discarded
            on_mount: [],
            before_update: [],
            after_update: [],
            callbacks: blank_object()
        };
        set_current_component({ $$ });
        const html = fn(result, props, bindings, slots);
        set_current_component(parent_component);
        return html;
    }
    return {
        render: (props = {}, options = {}) => {
            on_destroy = [];
            const result = { head: '', css: new Set() };
            const html = $$render(result, props, {}, options);
            run_all(on_destroy);
            return {
                html,
                css: {
                    code: Array.from(result.css).map(css => css.code).join('\n'),
                    map: null // TODO
                },
                head: result.head
            };
        },
        $$render
    };
}

const subscriber_queue = [];
/**
 * Create a `Writable` store that allows both updating and reading by subscription.
 * @param {*=}value initial value
 * @param {StartStopNotifier=}start start and stop notifications for subscriptions
 */
function writable(value, start = noop) {
    let stop;
    const subscribers = [];
    function set(new_value) {
        if (safe_not_equal(value, new_value)) {
            value = new_value;
            if (stop) { // store is ready
                const run_queue = !subscriber_queue.length;
                for (let i = 0; i < subscribers.length; i += 1) {
                    const s = subscribers[i];
                    s[1]();
                    subscriber_queue.push(s, value);
                }
                if (run_queue) {
                    for (let i = 0; i < subscriber_queue.length; i += 2) {
                        subscriber_queue[i][0](subscriber_queue[i + 1]);
                    }
                    subscriber_queue.length = 0;
                }
            }
        }
    }
    function update(fn) {
        set(fn(value));
    }
    function subscribe(run, invalidate = noop) {
        const subscriber = [run, invalidate];
        subscribers.push(subscriber);
        if (subscribers.length === 1) {
            stop = start(set) || noop;
        }
        run(value);
        return () => {
            const index = subscribers.indexOf(subscriber);
            if (index !== -1) {
                subscribers.splice(index, 1);
            }
            if (subscribers.length === 0) {
                stop();
                stop = null;
            }
        };
    }
    return { set, update, subscribe };
}

let state = {
  page: writable(), //used by router
};

/* src/svelte/components/header.svelte generated by Svelte v3.12.1 */

const Header = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	
  let page = state.page;
  onMount(() => {
    const nav = document.getElementById("nav");
    nav.addEventListener("click", e => {
      e.preventDefault();
      if (e.target.tagName == "A") {
        let url = e.target.getAttribute("href");
        page.set(url);
        history.pushState(1, url.replace("/", ""), url);
      }
    });
  });

	return `<header class="bg-purple-700">
	  <nav class="flex justify-between w-full text-white p-4">
	    <a href="/">
	      <span class="font-semibold text-xl tracking-tight">Pinipig</span>
	    </a>
	    <div class="md:items-center md:w-auto flex">
	      <div id="nav" class="flex">
	        <a class="block md:text-white mr-4" href="/about">About</a>
	        <a class="block md:text-white mr-4" href="/counter">Counter</a>
	      </div>
	    </div>
	  </nav>

	</header>`;
});

/* src/svelte/pages/_404.svelte generated by Svelte v3.12.1 */

const css = {
	code: "h1.svelte-oagdjt{color:red;font-size:20px}",
	map: "{\"version\":3,\"file\":\"_404.svelte\",\"sources\":[\"_404.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let page = state.page;\\n</script>\\n\\n<style>\\n  h1 {\\n    color: red;\\n    font-size: 20px;\\n  }\\n</style>\\n\\n<!-- 404 -->\\n<svelte:head>\\n  <title>404 Page not Found</title>\\n</svelte:head>\\n<h1>Page Not found</h1>\\n\"],\"names\":[],\"mappings\":\"AAOE,EAAE,cAAC,CAAC,AACF,KAAK,CAAE,GAAG,CACV,SAAS,CAAE,IAAI,AACjB,CAAC\"}"
};

const _404 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {

	$$result.css.add(css);

	return `
	${($$result.head += `<title>404 Page not Found</title>`, "")}
	<h1 class="svelte-oagdjt">Page Not found</h1>`;
});

/* src/svelte/pages/about.svelte generated by Svelte v3.12.1 */

const About = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {

	return `${($$result.head += `<title>About</title>`, "")}
	${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	<h1 class="text-4xl">About Page</h1>`;
});

/* src/svelte/pages/counter.svelte generated by Svelte v3.12.1 */

const Counter = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	
  let counter = 0;

	return `${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	<div class="container mx-auto pt-64">
	  <div class="shadow-lg w-64 mx-auto">
	    <h2 class="text-center text-6xl text-indigo-700">${escape(counter)}</h2>
	    <div class="flex">
	      <button class="w-1/2 bg-red-400 focus:outline-none hover:bg-red-500">
	        -
	      </button>
	      <button class="w-1/2 bg-green-400 focus:outline-none hover:bg-green-500">
	        +
	      </button>

	    </div>

	  </div>

	</div>`;
});

/* src/svelte/pages/index.svelte generated by Svelte v3.12.1 */

const css$1 = {
	code: "#wrapper.svelte-17kg5o7{background-image:url(\"/assets/success.jpg\")}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let page = state.page;\\n</script>\\n\\n<style>\\n  #wrapper {\\n    background-image: url(\\\"/assets/success.jpg\\\");\\n  }\\n</style>\\n\\n<svelte:head>\\n  <title>Pinipig-Svelte</title>\\n</svelte:head>\\n<div id=\\\"wrapper\\\" class=\\\"bg-cover bg-right bg-no-repeat h-screen max-h-screen \\\">\\n  <Header />\\n  <div id=\\\"hero\\\" class=\\\"text-right sm:text-left p-2 sm:pl-64 text-indigo-600\\\">\\n    <h1 class=\\\"text-6xl sm:text-ube \\\">Awesome!</h1>\\n    <h2 class=\\\"text-sm sm:text-purple-700 \\\">Svelte plugin is now installed!</h2>\\n    <div>\\n      <div class=\\\"text-purple-700 text-2xl mt-64\\\">\\n        Start coding awesomeness! ðŸ˜Ž\\n      </div>\\n      <div>\\n        <div>The svelte files are located at</div>\\n        <pre>/src/svelte</pre>\\n        <div>\\n          Learn more about PinipigJS at\\n          <a\\n            href=\\\"https://pinipig.js.org\\\"\\n            class=\\\"underline hover:text-gray-900\\\"\\n            target=\\\"_blank\\\">\\n            Pinipig.js.org\\n          </a>\\n        </div>\\n        <div>\\n          Documentation about this plugin\\n          <a\\n            class=\\\"underline hover:text-gray-900\\\"\\n            href=\\\"/about\\\"\\n            on:click={e => {\\n              e.preventDefault();\\n              page.set('/about');\\n            }}>\\n            here\\n          </a>\\n\\n        </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\\n\"],\"names\":[],\"mappings\":\"AAOE,QAAQ,eAAC,CAAC,AACR,gBAAgB,CAAE,IAAI,qBAAqB,CAAC,AAC9C,CAAC\"}"
};

const Pages = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {

	$$result.css.add(css$1);

	return `${($$result.head += `<title>Pinipig-Svelte</title>`, "")}
	<div id="wrapper" class="bg-cover bg-right bg-no-repeat h-screen max-h-screen  svelte-17kg5o7">
	  ${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	  <div id="hero" class="text-right sm:text-left p-2 sm:pl-64 text-indigo-600">
	    <h1 class="text-6xl sm:text-ube ">Awesome!</h1>
	    <h2 class="text-sm sm:text-purple-700 ">Svelte plugin is now installed!</h2>
	    <div>
	      <div class="text-purple-700 text-2xl mt-64">
	        Start coding awesomeness! ðŸ˜Ž
	      </div>
	      <div>
	        <div>The svelte files are located at</div>
	        <pre>/src/svelte</pre>
	        <div>
	          Learn more about PinipigJS at
	          <a href="https://pinipig.js.org" class="underline hover:text-gray-900" target="_blank">
	            Pinipig.js.org
	          </a>
	        </div>
	        <div>
	          Documentation about this plugin
	          <a class="underline hover:text-gray-900" href="/about">
	            here
	          </a>

	        </div>
	      </div>

	    </div>
	  </div>
	</div>`;
});

/*
	 Generated by Pinipig-Svelte 
	 Any Manual input here will be removed every Route Generation  
*/

const routes =[
	{route: '/_404', component: _404 },
	{route: '/about', component: About },
	{route: '/counter', component: Counter },
	{route: '/index', component: Pages },
];

/* src/plugins/svelte/App.svelte generated by Svelte v3.12.1 */

const App = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;

	let { setPage, payload } = $$props;

  const getRoute = routes => route => {
    try {
      let target = routes.find(function(o) {
        return o.route == route;
      });
      return target.component;
    } catch (e) {
      try {
        //if running on server set header status to 404
        ctx.res.writeStatus("404");
      } catch (e) {}
      page.set("/_404");
    }
  };
  const Route = getRoute(routes);

  let page = state.page; validate_store(page, 'page'); $page = get_store_value(page);
  if (setPage) {
    page.set(setPage);
  }

	if ($$props.setPage === void 0 && $$bindings.setPage && setPage !== void 0) $$bindings.setPage(setPage);
	if ($$props.payload === void 0 && $$bindings.payload && payload !== void 0) $$bindings.payload(payload);

	validate_store(page, 'page'); $page = get_store_value(page);

	return `${validate_component(((Route($page)) || missing_component), 'svelte:component').$$render($$result, { payload: payload }, {}, {})}`;
});

module.exports = App;
