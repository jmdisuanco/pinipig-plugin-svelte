'use strict';

function noop() { }
function run(fn) {
    return fn();
}
function blank_object() {
    return Object.create(null);
}
function run_all(fns) {
    fns.forEach(run);
}
function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}
function validate_store(store, name) {
    if (!store || typeof store.subscribe !== 'function') {
        throw new Error(`'${name}' is not a store with a 'subscribe' method`);
    }
}
function subscribe(store, callback) {
    const unsub = store.subscribe(callback);
    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
}
function get_store_value(store) {
    let value;
    subscribe(store, _ => value = _)();
    return value;
}

let current_component;
function set_current_component(component) {
    current_component = component;
}
const escaped = {
    '"': '&quot;',
    "'": '&#39;',
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;'
};
function escape(html) {
    return String(html).replace(/["'&<>]/g, match => escaped[match]);
}
const missing_component = {
    $$render: () => ''
};
function validate_component(component, name) {
    if (!component || !component.$$render) {
        if (name === 'svelte:component')
            name += ' this={...}';
        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);
    }
    return component;
}
let on_destroy;
function create_ssr_component(fn) {
    function $$render(result, props, bindings, slots) {
        const parent_component = current_component;
        const $$ = {
            on_destroy,
            context: new Map(parent_component ? parent_component.$$.context : []),
            // these will be immediately discarded
            on_mount: [],
            before_update: [],
            after_update: [],
            callbacks: blank_object()
        };
        set_current_component({ $$ });
        const html = fn(result, props, bindings, slots);
        set_current_component(parent_component);
        return html;
    }
    return {
        render: (props = {}, options = {}) => {
            on_destroy = [];
            const result = { head: '', css: new Set() };
            const html = $$render(result, props, {}, options);
            run_all(on_destroy);
            return {
                html,
                css: {
                    code: Array.from(result.css).map(css => css.code).join('\n'),
                    map: null // TODO
                },
                head: result.head
            };
        },
        $$render
    };
}

const subscriber_queue = [];
/**
 * Create a `Writable` store that allows both updating and reading by subscription.
 * @param {*=}value initial value
 * @param {StartStopNotifier=}start start and stop notifications for subscriptions
 */
function writable(value, start = noop) {
    let stop;
    const subscribers = [];
    function set(new_value) {
        if (safe_not_equal(value, new_value)) {
            value = new_value;
            if (stop) { // store is ready
                const run_queue = !subscriber_queue.length;
                for (let i = 0; i < subscribers.length; i += 1) {
                    const s = subscribers[i];
                    s[1]();
                    subscriber_queue.push(s, value);
                }
                if (run_queue) {
                    for (let i = 0; i < subscriber_queue.length; i += 2) {
                        subscriber_queue[i][0](subscriber_queue[i + 1]);
                    }
                    subscriber_queue.length = 0;
                }
            }
        }
    }
    function update(fn) {
        set(fn(value));
    }
    function subscribe(run, invalidate = noop) {
        const subscriber = [run, invalidate];
        subscribers.push(subscriber);
        if (subscribers.length === 1) {
            stop = start(set) || noop;
        }
        run(value);
        return () => {
            const index = subscribers.indexOf(subscriber);
            if (index !== -1) {
                subscribers.splice(index, 1);
            }
            if (subscribers.length === 0) {
                stop();
                stop = null;
            }
        };
    }
    return { set, update, subscribe };
}

let state = {
  page: writable(), //used by router
};

/* src/svelte/components/header.svelte generated by Svelte v3.12.1 */

const Header = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {

	return `<header class="bg-gray-400">
	  <nav class="flex justify-between w-full bg-gray-500 text-white p-4">
	    <a href="/">
	      <span class="font-semibold text-xl tracking-tight">Pinipig</span>
	    </a>
	    <div class="md:items-center md:w-auto flex">
	      <div class="md:flex hidden">
	        <a class="block md:text-white mr-4" href="/about.html">
	          About
	        </a>
	        <a class="block md:text-white mr-4" href="/counter.html">
	          Counter
	        </a>
	      </div>
	    </div>
	  </nav>
	</header>`;
});

/* src/svelte/pages/_404.svelte generated by Svelte v3.12.1 */

const css = {
	code: "h1.svelte-oagdjt{color:red;font-size:20px}",
	map: "{\"version\":3,\"file\":\"_404.svelte\",\"sources\":[\"_404.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let page = state.page;\\n</script>\\n\\n<style>\\n  h1 {\\n    color: red;\\n    font-size: 20px;\\n  }\\n</style>\\n\\n<!-- 404 -->\\n<svelte:head>\\n  <title>404 Page not Found</title>\\n</svelte:head>\\n<h1>Page Not found</h1>\\n\"],\"names\":[],\"mappings\":\"AAOE,EAAE,cAAC,CAAC,AACF,KAAK,CAAE,GAAG,CACV,SAAS,CAAE,IAAI,AACjB,CAAC\"}"
};

const _404 = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {

	$$result.css.add(css);

	return `
	${($$result.head += `<title>404 Page not Found</title>`, "")}
	<h1 class="svelte-oagdjt">Page Not found</h1>`;
});

/* src/svelte/pages/about.svelte generated by Svelte v3.12.1 */

const css$1 = {
	code: "h1.svelte-1ucbz36{color:purple}",
	map: "{\"version\":3,\"file\":\"about.svelte\",\"sources\":[\"about.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let page = state.page;\\n</script>\\n\\n<style>\\n  h1 {\\n    color: purple;\\n  }\\n</style>\\n\\n<svelte:head>\\n  <title>About us</title>\\n</svelte:head>\\n<Header />\\n<h1>Page {$page}!</h1>\\n\"],\"names\":[],\"mappings\":\"AAOE,EAAE,eAAC,CAAC,AACF,KAAK,CAAE,MAAM,AACf,CAAC\"}"
};

const About = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;

	
  let page = state.page; validate_store(page, 'page'); $page = get_store_value(page);

	$$result.css.add(css$1);

	validate_store(page, 'page'); $page = get_store_value(page);

	return `${($$result.head += `<title>About us</title>`, "")}
	${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	<h1 class="svelte-1ucbz36">Page ${escape($page)}!</h1>`;
});

/* src/svelte/pages/blog.svelte generated by Svelte v3.12.1 */

const css$2 = {
	code: "h1.svelte-1ucbz36{color:purple}",
	map: "{\"version\":3,\"file\":\"blog.svelte\",\"sources\":[\"blog.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let page = state.page;\\n  export let payload;\\n\\n  let data = {\\n    title: \\\"\\\",\\n    content: \\\"\\\",\\n    slug: \\\"\\\"\\n  };\\n\\n  if (payload) {\\n    data = JSON.parse(payload);\\n  }\\n</script>\\n\\n<style>\\n  h1 {\\n    color: purple;\\n  }\\n</style>\\n\\n<svelte:head>\\n  <title>{data.title}</title>\\n</svelte:head>\\n{#if data}\\n  <Header />\\n  <h1>Page {$page} / {data.slug}</h1>\\n  <div>{data.content}</div>\\n{/if}\\n\"],\"names\":[],\"mappings\":\"AAkBE,EAAE,eAAC,CAAC,AACF,KAAK,CAAE,MAAM,AACf,CAAC\"}"
};

const Blog = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;

	
  let page = state.page; validate_store(page, 'page'); $page = get_store_value(page);
  let { payload } = $$props;

  let data = {
    title: "",
    content: "",
    slug: ""
  };

  if (payload) {
    data = JSON.parse(payload);
  }

	if ($$props.payload === void 0 && $$bindings.payload && payload !== void 0) $$bindings.payload(payload);

	$$result.css.add(css$2);

	validate_store(page, 'page'); $page = get_store_value(page);

	return `${($$result.head += `<title>${escape(data.title)}</title>`, "")}
	${ data ? `${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	  <h1 class="svelte-1ucbz36">Page ${escape($page)} / ${escape(data.slug)}</h1>
	  <div>${escape(data.content)}</div>` : `` }`;
});

/* src/svelte/pages/counter.svelte generated by Svelte v3.12.1 */

const css$3 = {
	code: "h1.svelte-1ucbz36{color:purple}",
	map: "{\"version\":3,\"file\":\"counter.svelte\",\"sources\":[\"counter.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let counter = 0;\\n  let page = state.page;\\n</script>\\n\\n<style>\\n  h1 {\\n    color: purple;\\n  }\\n</style>\\n\\n<Header />\\n<h1>Page {$page}!</h1>\\n<h2>{counter}</h2>\\n<button\\n  on:click={() => {\\n    counter += 1;\\n  }}>\\n  Add\\n</button>\\n\"],\"names\":[],\"mappings\":\"AAQE,EAAE,eAAC,CAAC,AACF,KAAK,CAAE,MAAM,AACf,CAAC\"}"
};

const Counter = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;

	
  let counter = 0;
  let page = state.page; validate_store(page, 'page'); $page = get_store_value(page);

	$$result.css.add(css$3);

	validate_store(page, 'page'); $page = get_store_value(page);

	return `${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	<h1 class="svelte-1ucbz36">Page ${escape($page)}!</h1>
	<h2>${escape(counter)}</h2>
	<button>
	  Add
	</button>`;
});

/* src/svelte/pages/index.svelte generated by Svelte v3.12.1 */

const css$4 = {
	code: "h1.svelte-1ucbz36{color:purple}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script>\\n  import Header from \\\"../components/header.svelte\\\";\\n  import state from \\\"../../plugins/svelte/state\\\";\\n  let page = state.page;\\n</script>\\n\\n<style>\\n  h1 {\\n    color: purple;\\n  }\\n</style>\\n\\n<svelte:head>\\n  <title>Pinipig SSR</title>\\n</svelte:head>\\n<Header />\\n<h1>Page : {$page}!</h1>\\n<div class=\\\"bg-green-300\\\">Home Page</div>\\n\"],\"names\":[],\"mappings\":\"AAOE,EAAE,eAAC,CAAC,AACF,KAAK,CAAE,MAAM,AACf,CAAC\"}"
};

const Index = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;

	
  let page = state.page; validate_store(page, 'page'); $page = get_store_value(page);

	$$result.css.add(css$4);

	validate_store(page, 'page'); $page = get_store_value(page);

	return `${($$result.head += `<title>Pinipig SSR</title>`, "")}
	${validate_component(Header, 'Header').$$render($$result, {}, {}, {})}
	<h1 class="svelte-1ucbz36">Page : ${escape($page)}!</h1>
	<div class="bg-green-300">Home Page</div>`;
});

/*
	 Generated by Pinipig-Svelte 
	 Any Manual input here will be removed every Route Generation  
*/

const routes =[
	{route: '/_404', component: _404 },
	{route: '/about', component: About },
	{route: '/blog', component: Blog },
	{route: '/counter', component: Counter },
	{route: '/index', component: Index },
];

/* src/plugins/svelte/App.svelte generated by Svelte v3.12.1 */

const App = create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $page;

	let { setPage, payload } = $$props;

  const getRoute = routes => route => {
    try {
      let target = routes.find(function(o) {
        return o.route == route;
      });
      return target.component;
    } catch (e) {
      try {
        //if running on server set header status to 404
        ctx.res.writeStatus("404");
      } catch (e) {}
      page.set("/_404");
    }
  };
  const Route = getRoute(routes);

  let page = state.page; validate_store(page, 'page'); $page = get_store_value(page);
  if (setPage) {
    page.set(setPage);
  }

	if ($$props.setPage === void 0 && $$bindings.setPage && setPage !== void 0) $$bindings.setPage(setPage);
	if ($$props.payload === void 0 && $$bindings.payload && payload !== void 0) $$bindings.payload(payload);

	validate_store(page, 'page'); $page = get_store_value(page);

	return `${validate_component(((Route($page)) || missing_component), 'svelte:component').$$render($$result, { payload: payload }, {}, {})}`;
});

module.exports = App;
